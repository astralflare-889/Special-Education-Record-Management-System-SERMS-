{% extends 'student_records/base.html' %}

{% block title %}Student Management - SERMS{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header">
        <h1 class="card-title">Student Management</h1>
        <p style="color: #7f8c8d;">Administrative access to all student records</p>
    </div>
    
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-number">{{ students.count }}</div>
            <div class="stat-label">Total Students</div>
        </div>
        <div class="stat-card">
            <div class="stat-number">{{ students.count|add:"0" }}</div>
            <div class="stat-label">Active Cases</div>
        </div>
        <div class="stat-card">
            <div class="stat-number">0</div>
            <div class="stat-label">Pending Reviews</div>
        </div>
    </div>
</div>

<div class="card">
    <div class="card-header" style="display: flex; justify-content: space-between; align-items: center;">
        <h2 class="card-title">All Students</h2>
        <a href="/admin/student_records/student/add/" class="btn btn-success">Add New Student</a>
    </div>
    
    {% if students %}
        <table class="table">
            <thead>
                <tr>
                    <th>Student Name</th>
                    <th>Student ID</th>
                    <th>Age/Grade</th>
                    <th>Assigned Teacher</th>
                    <th>Parent Contact</th>
                    <th>Special Needs</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for student in students %}
                <tr>
                    <td>
                        <strong style="color: #2c3e50;">{{ student.full_name }}</strong><br>
                        <small style="color: #7f8c8d;">Added: {{ student.date_added|date:"M d, Y" }}</small>
                    </td>
                    <td><strong style="color: #e74c3c;">{{ student.admission_number }}</strong></td>
                    <td>
                        {{ student.age }} years<br>
                        <small style="color: #7f8c8d;">Grade {{ student.grade }}</small>
                    </td>
                    <td>
                        {% if student.assigned_teacher %}
                            <strong>{{ student.assigned_teacher }}</strong>
                        {% else %}
                            <span style="color: #e74c3c;">Not Assigned</span>
                        {% endif %}
                    </td>
                    <td>
                        <strong>{{ student.parent_name }}</strong><br>
                        <small style="color: #7f8c8d;">{{ student.parent_contact }}</small>
                    </td>
                    <td>{{ student.special_needs|truncatewords:5 }}</td>
                    <td>
                        <a href="{% url 'student_detail' student.id %}" class="btn btn-primary" style="margin-bottom: 0.5rem;">
                            View Details
                        </a><br>
                        <a href="/admin/student_records/student/{{ student.id }}/change/" class="btn" style="background: #f39c12; color: white;">
                            Edit
                        </a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <div style="text-align: center; padding: 3rem; color: #7f8c8d;">
            <h3>No Students Found</h3>
            <p>Start by adding students to the system.</p>
            <a href="/admin/student_records/student/add/" class="btn btn-success" style="margin-top: 1rem;">
                Add First Student
            </a>
        </div>
    {% endif %}
</div>
{% endblock %}